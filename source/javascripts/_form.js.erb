var baseCount = 0;

function addBase() {
  var formBases = document.getElementById('formBases');
  var newBase = document.createElement('label');
  var baseValue = document.getElementsByClassName('base')[0].value;
  newBase.innerHTML = '<input type="text" class="base" value="' + baseValue + '" onkeyup="changeBase(this,event.keyCode)">';

  if (ratioCount == 0 && ratioCount < multiLimit) {
    formBases.appendChild(newBase);
    baseCount++;
  }

  if (baseCount == 1) {
    formBases.classList.add('multi');
    document.getElementById('formRatios').classList.add('no-add');
  }

  if (baseCount == multiLimit) {
    formBases.classList.add('no-add');
  }
}

function removeBase() {
  if (baseCount > 0) {
    document.getElementById('formBases').lastChild.remove();
    baseCount--;
  }

  if (baseCount == 0) {
    formBases.classList.remove('multi');
    document.getElementById('formRatios').classList.remove('no-add');
  }

  if (baseCount < multiLimit) {
    formBases.classList.remove('no-add');
  }

  changeBase();
}

var ratioCount = 0;

function addRatio() {
  var formRatios = document.getElementById('formRatios');
  var newRatio = document.createElement('label');
  var baseValue = document.getElementsByClassName('ratio')[0].value;
  newRatio.innerHTML = '<input type="number" class="ratio" min="1.01" value="' + baseValue + '" step="0.01" onkeyup="changeRatio()">';

  if (baseCount == 0 && ratioCount < multiLimit) {
    formRatios.appendChild(newRatio);
    ratioCount++;
  }

  if (ratioCount == 1) {
    formRatios.classList.add('multi');
    document.getElementById('formBases').classList.add('no-add');
  }

  if (ratioCount == multiLimit) {
    formRatios.classList.add('no-add');
  }
}

function removeRatio() {
  if (ratioCount > 0) {
    document.getElementById('formRatios').lastChild.remove();
    ratioCount--;
  }

  if (ratioCount == 0) {
    formRatios.classList.remove('multi');
    document.getElementById('formBases').classList.remove('no-add');
  }

  if (ratioCount < multiLimit) {
    formRatios.classList.remove('no-add');
  }

  changeRatio();
}

