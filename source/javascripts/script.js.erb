//= require '_ms.js.erb'
//= require '_changevalue.js.erb'
//= require '_panels.js.erb'
//= require '_form.js.erb'
//= require '_error.js.erb'

// Vars
var mode = 'web';
var panel = 'form';
// base
var msBase = 1;
// unit
var msUnit = 'em';
// ratio
var msRatio = 1.5;
// limit
var multiLimit = 3;

function stepUnits(u, msBase, msUnit, msRatio) {
  if (msUnit == 'em') {
    return (Math.round((ms(u,1,msRatio)[0])*1000)/1000)+'em';
  } else {
    return (Math.round((ms(u,msBase,msRatio)[0])*1000)/1000)+msUnit + ' / ' + (Math.round((ms(u,1,msRatio)[0])*1000)/1000)+'em';
  }
}

function msPage(msBase, msUnit, msRatio) {
  // upper bound of scale
  var u = 10;
  // lower bound of scale
  var l = -6;

  // document.getElementByClassName('text').classList.remove('s1 s2 s3');

  while (u >= l) {

    var step = ms(u,msBase,msRatio);

    if (u >= 0) {
      document.getElementById('m'+u+'value').innerHTML=stepUnits(u, msBase, msUnit, msRatio);
      document.getElementById('text_m'+u).style.fontSize=(step[0]+msUnit);
      document.getElementById('text_m'+u).setAttribute('class', 's'+step[1]+' text');
    } else {
      document.getElementById('mn'+Math.abs(u)+'value').innerHTML=stepUnits(u, msBase, msUnit, msRatio);
      document.getElementById('text_mn'+Math.abs(u)).style.fontSize=(step[0]+msUnit);
      document.getElementById('text_mn'+Math.abs(u)).setAttribute('class', 's'+step[1]+' text');
    }

    u--;
  }
  document.getElementById('text_m0').scrollIntoView(false);
}

document.addEventListener('DOMContentLoaded', function(){
  msPage(msBase, msUnit, msRatio);
});